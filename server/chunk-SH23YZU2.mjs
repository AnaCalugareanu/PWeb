import './polyfills.server.mjs';
import{a as re,b as le,c as ae,d as se,g as pe,h as de,i as ce,j as N,k as ue}from"./chunk-M63QPG5Y.mjs";import{b as me,g as I,j as he,k as ze,l as ge}from"./chunk-3AQAMF36.mjs";import{C as L,F as q,Fa as ie,G as Q,Ga as oe,I as Z,J as $,N as ee,P as te,S as ne,W as F}from"./chunk-CWDKVZD6.mjs";import"./chunk-FCJ3PSD6.mjs";import{$b as s,$c as S,Ac as K,Cb as O,Fc as E,Hb as o,Ib as r,Jb as g,Kb as J,Lb as G,Nb as b,Qb as f,Sb as z,Wc as X,Xc as M,_b as C,ab as H,ac as U,da as A,db as a,dc as x,eb as T,ec as y,fc as k,hc as V,kc as Y,ma as v,na as R,nc as w,qb as P,tb as _,xa as p,xb as c,ya as m,zb as j}from"./chunk-ADZ2ZCHX.mjs";import{a as W,b as B}from"./chunk-5XUXGTUW.mjs";var ve=(n,u)=>[n,u];function xe(n,u){if(n&1&&g(0,"img",6),n&2){let t=z();c("src",t.book.coverUrl,H)}}function ye(n,u){if(n&1){let t=b();o(0,"p",7),f("click",function(){p(t);let e=z();return m(e.handleReview())}),s(1," Add Review "),r()}}function ke(n,u){if(n&1){let t=b();o(0,"p",7),f("click",function(){p(t);let e=z(2);return m(e.handleAddToWishlist())}),s(1," Add to Wishlist "),r()}}function Ve(n,u){if(n&1){let t=b();o(0,"p",10),f("click",function(){p(t);let e=z(2);return m(e.handleRemoveFromWishlist())}),o(1,"span",11),s(2,"favorite"),r(),s(3," In your Wishlist "),r()}}function Te(n,u){if(n&1&&_(0,ke,2,0,"p",8)(1,Ve,4,0,"p",9),n&2){let t=z();c("ngIf",!t.book.isInWishlist),a(),c("ngIf",t.book.isInWishlist)}}var _e=(()=>{class n{bookService;book;modalIsVisible=!1;constructor(t){this.bookService=t}handleReview(){this.modalIsVisible=!0}handleAddToWishlist(){this.bookService.addToWishlist(this.book)}handleRemoveFromWishlist(){this.bookService.removeFromWishlist(this.book)}static \u0275fac=function(i){return new(i||n)(T(I))};static \u0275cmp=v({type:n,selectors:[["app-card"]],inputs:{book:"book"},standalone:!0,features:[V],decls:9,vars:9,consts:[["coverTemplate",""],["actionReview",""],["actionAddToWishlist",""],[2,"width","300px",3,"nzCover","nzActions"],[3,"nzTitle","nzDescription"],[3,"book","modalIsVisible"],["alt","example",2,"height","250px","width","auto","max-width","100%","object-fit","cover","display","block","margin","0 auto",3,"src"],[1,"flex","flex-row","items-center","justify-center",2,"margin","0","gap","5px",3,"click"],["style","margin: 0; gap: 5px","class","flex flex-row items-center justify-center",3,"click",4,"ngIf"],["style","margin: 0; gap: 5px; color: red","class","flex flex-row items-center justify-center",3,"click",4,"ngIf"],[1,"flex","flex-row","items-center","justify-center",2,"margin","0","gap","5px","color","red",3,"click"],[1,"material-symbols-outlined"]],template:function(i,e){if(i&1&&(o(0,"nz-card",3),g(1,"nz-card-meta",4),r(),_(2,xe,1,1,"ng-template",null,0,w)(4,ye,2,0,"ng-template",null,1,w)(6,Te,2,2,"ng-template",null,2,w),g(8,"app-modal",5)),i&2){let d=C(3),h=C(5),l=C(7);c("nzCover",d)("nzActions",Y(6,ve,h,l)),a(),c("nzTitle",e.book.title+" by "+e.book.authorName)("nzDescription",e.book.description),a(7),c("book",e.book)("modalIsVisible",e.modalIsVisible)}},dependencies:[re,se,ae,le,pe,F,S,M,me,N,ue,L]})}return n})();function Me(n,u){if(n&1&&(J(0),s(1),G()),n&2){let t=z(2);a(),U(t.nzText)}}function Se(n,u){if(n&1&&(o(0,"span",0),_(1,Me,2,1,"ng-container",1),r()),n&2){let t=z();a(),c("nzStringTemplateOutlet",t.nzText)}}var D=(()=>{class n{constructor(){this.nzType="horizontal",this.nzOrientation="center",this.nzDashed=!1,this.nzPlain=!1}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=v({type:n,selectors:[["nz-divider"]],hostAttrs:[1,"ant-divider"],hostVars:16,hostBindings:function(i,e){i&2&&j("ant-divider-horizontal",e.nzType==="horizontal")("ant-divider-vertical",e.nzType==="vertical")("ant-divider-with-text",e.nzText)("ant-divider-plain",e.nzPlain)("ant-divider-with-text-left",e.nzText&&e.nzOrientation==="left")("ant-divider-with-text-right",e.nzText&&e.nzOrientation==="right")("ant-divider-with-text-center",e.nzText&&e.nzOrientation==="center")("ant-divider-dashed",e.nzDashed)},inputs:{nzText:"nzText",nzType:"nzType",nzOrientation:"nzOrientation",nzDashed:[2,"nzDashed","nzDashed",E],nzPlain:[2,"nzPlain","nzPlain",E]},exportAs:["nzDivider"],standalone:!0,features:[P,V],decls:1,vars:1,consts:[[1,"ant-divider-inner-text"],[4,"nzStringTemplateOutlet"]],template:function(i,e){i&1&&_(0,Se,2,1,"span",0),i&2&&O(e.nzText?0:-1)},dependencies:[oe,ie],encapsulation:2,changeDetection:0})}}return n})(),be=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=R({type:n})}static{this.\u0275inj=A({imports:[D]})}}return n})();function Fe(n,u){if(n&1){let t=b();o(0,"button",56),f("click",function(){p(t);let e=z();return m(e.search(e.searchTerm))}),s(1," Search "),r()}}function Ne(n,u){if(n&1&&(o(0,"div",59),g(1,"app-card",60),r()),n&2){let t=u.$implicit;a(),c("book",t)}}function Ie(n,u){if(n&1&&(o(0,"div",57),_(1,Ne,2,1,"div",58),r()),n&2){let t=z();a(),c("ngForOf",t.books)}}function Ee(n,u){n&1&&(o(0,"div",61)(1,"h1",62),s(2," This library is loading, please touch some grass for a moment... "),r()())}var ht=(()=>{class n{bookService;cdr;books=[];loading=!1;allBooks=[];currentIndex=0;wishlist=[];wishlistSub;searchTerm="";selectedFilter="";selectedSort="title";constructor(t,i){this.bookService=t,this.cdr=i}ngOnInit(){this.loading=!0,this.wishlistSub=this.bookService.wishlist$.subscribe(t=>{this.wishlist=t,this.updateBooksWishlistStatus()}),this.getBooks("harry potter")}onFilterChange(t){this.selectedFilter=t,this.getBooks(this.selectedFilter)}onSortChange(t){this.selectedSort=t,t==="title"?this.books=[...this.books].sort((i,e)=>i.title.localeCompare(e.title)):t==="author"?this.books=[...this.books].sort((i,e)=>i.authorName.localeCompare(e.authorName)):t==="oldest"?this.books=[...this.books].sort((i,e)=>i.publishYear-e.publishYear):t==="newest"&&(this.books=[...this.books].sort((i,e)=>e.publishYear-i.publishYear)),this.cdr.detectChanges()}getBooks(t){this.loading=!0,this.bookService.getBooks(t).subscribe(i=>{this.allBooks=i.docs.map(e=>({title:e.title,authorName:e.author_name?e.author_name.join(", "):"Unknown",coverUrl:e.cover_i?`https://covers.openlibrary.org/b/id/${e.cover_i}-L.jpg`:"https://media.istockphoto.com/id/1452662817/vector/no-picture-available-placeholder-thumbnail-icon-illustration-design.jpg?s=612x612&w=0&k=20&c=bGI_FngX0iexE3EBANPw9nbXkrJJA4-dcEJhCrP8qMw=",publishYear:e.first_publish_year||"Unknown"})),this.currentIndex=12,this.books=this.allBooks.slice(0,this.currentIndex),this.updateBooksWishlistStatus(),this.loading=!1},i=>{console.error("Error fetching books:",i),this.loading=!1})}loadMoreBooks(){let t=this.currentIndex+12;this.books=this.allBooks.slice(0,t),this.currentIndex=t,this.updateBooksWishlistStatus()}updateBooksWishlistStatus(){this.books=this.books.map(t=>B(W({},t),{isInWishlist:this.wishlist.some(i=>i.title===t.title&&i.authorName===t.authorName)}))}search(t){this.getBooks(t)}ngOnDestroy(){this.wishlistSub?.unsubscribe()}static \u0275fac=function(i){return new(i||n)(T(I),T(K))};static \u0275cmp=v({type:n,selectors:[["app-home"]],standalone:!0,features:[V],decls:69,vars:8,consts:[["suffixButton",""],["loading",""],[1,"flex","flex-col","items-center","justify-start",2,"width","100%"],[1,"p-8"],[1,"text-3xl","font-bold","mb-4"],[1,"mb-4"],[1,"mt-8"],["routerLink","/about",1,"text-blue-500","hover:underline"],["nzSearch","","nzSize","large",2,"width","50%","margin-top","30px",3,"nzAddOnAfter"],["type","text","nz-input","","placeholder","What are you looking for?",3,"ngModelChange","ngModel"],[1,"flex","flex-row","items-center","justify-between","w-full",2,"padding","30px"],[1,"flex","flex-row","items-center","justify-start"],[2,"margin","0","padding-right","20px"],["nzPlaceHolder","Genre",2,"width","200px","margin-right","20px",3,"ngModelChange","ngModel"],["nzValue","art","nzLabel","Art"],["nzValue","biography","nzLabel","Biography"],["nzValue","history","nzLabel","History"],["nzValue","medical","nzLabel","Medical"],["nzValue","poetry","nzLabel","Poetry"],["nzValue","romance","nzLabel","Romance"],["nzValue","science","nzLabel","Science"],["nzValue","travel","nzLabel","Travel"],["nzValue","fantasy","nzLabel","Fantasy"],["nzValue","fiction","nzLabel","Fiction"],["nzValue","non-fiction","nzLabel","Non-Fiction"],["nzValue","mystery","nzLabel","Mystery"],["nzValue","thriller","nzLabel","Thriller"],["nzPlaceHolder","Author",2,"width","200px","margin-right","20px",3,"ngModelChange","ngModel"],["nzValue","J K Rowling","nzLabel","J K Rowling"],["nzValue","Stephen King","nzLabel","Stephen King"],["nzValue","Agatha Christie","nzLabel","Agatha Christie"],["nzValue","George R R Martin","nzLabel","George R R Martin"],["nzValue","J R R Tolkien","nzLabel","J R R Tolkien"],["nzValue","Isaac Asimov","nzLabel","Isaac Asimov"],["nzValue","Mark Twain","nzLabel","Mark Twain"],["nzValue","Ernest Hemingway","nzLabel","Ernest Hemingway"],["nzValue","F Scott Fitzgerald","nzLabel","F Scott Fitzgerald"],["nzValue","Jane Austen","nzLabel","Jane Austen"],["nzValue","Charles Dickens","nzLabel","Charles Dickens"],["nzValue","Leo Tolstoy","nzLabel","Leo Tolstoy"],["nzPlaceHolder","Language",2,"width","200px","margin-right","20px",3,"ngModelChange","ngModel"],["nzValue","eng","nzLabel","English"],["nzValue","fr","nzLabel","French"],["nzValue","de","nzLabel","German"],["nzValue","es","nzLabel","Spanish"],["nzValue","it","nzLabel","Italian"],["nzValue","pt","nzLabel","Portuguese"],["nzValue","ru","nzLabel","Russian"],["nzValue","zh","nzLabel","Chinese"],["nzPlaceHolder","Title",2,"width","200px","margin-right","20px",3,"ngModelChange","ngModel"],["nzValue","title","nzLabel","Title (alphabetically)"],["nzValue","author","nzLabel","Author (alphabetically)"],["nzValue","oldest","nzLabel","Oldest"],["nzValue","newest","nzLabel","Newest"],["class","flex flex-row flex-wrap items-center justify-start w-full","style","padding: 30px",4,"ngIf","ngIfElse"],["nz-button","","nzType","primary",2,"margin-bottom","40px",3,"click"],["nz-button","","nzType","primary","nzSize","large","nzSearch","",3,"click"],[1,"flex","flex-row","flex-wrap","items-center","justify-start","w-full",2,"padding","30px"],["style","padding: 20px",4,"ngFor","ngForOf"],[2,"padding","20px"],[3,"book"],[1,"loading-text"],[1,"text-3xl","font-bold","mb-4",2,"padding","50px","background","whitesmoke","border-radius","10px","margin-top","20px"]],template:function(i,e){if(i&1){let d=b();o(0,"div",2)(1,"div",3)(2,"h1",4),s(3,"Welcome to the Book Club!"),r(),o(4,"p",5),s(5," This is friendly community where we share our favorite reads and more. "),r(),o(6,"p"),s(7,"Explore the features and enjoy your stay!"),r(),o(8,"div",6)(9,"a",7),s(10,"Learn more about us"),r()()(),o(11,"nz-input-group",8)(12,"input",9),k("ngModelChange",function(l){return p(d),y(e.searchTerm,l)||(e.searchTerm=l),m(l)}),r()(),_(13,Fe,2,0,"ng-template",null,0,w),g(15,"nz-divider"),o(16,"div",10)(17,"div",11)(18,"p",12),s(19,"Filter by:"),r(),o(20,"nz-select",13),k("ngModelChange",function(l){return p(d),y(e.selectedFilter,l)||(e.selectedFilter=l),m(l)}),f("ngModelChange",function(){return p(d),m(e.onFilterChange(e.selectedFilter))}),g(21,"nz-option",14)(22,"nz-option",15)(23,"nz-option",16)(24,"nz-option",17)(25,"nz-option",18)(26,"nz-option",19)(27,"nz-option",20)(28,"nz-option",21)(29,"nz-option",22)(30,"nz-option",23)(31,"nz-option",24)(32,"nz-option",25)(33,"nz-option",26),r(),o(34,"nz-select",27),k("ngModelChange",function(l){return p(d),y(e.selectedFilter,l)||(e.selectedFilter=l),m(l)}),f("ngModelChange",function(){return p(d),m(e.onFilterChange(e.selectedFilter))}),g(35,"nz-option",28)(36,"nz-option",29)(37,"nz-option",30)(38,"nz-option",31)(39,"nz-option",32)(40,"nz-option",33)(41,"nz-option",34)(42,"nz-option",35)(43,"nz-option",36)(44,"nz-option",37)(45,"nz-option",38)(46,"nz-option",39),r(),o(47,"nz-select",40),k("ngModelChange",function(l){return p(d),y(e.selectedFilter,l)||(e.selectedFilter=l),m(l)}),f("ngModelChange",function(){return p(d),m(e.onFilterChange(e.selectedFilter))}),g(48,"nz-option",41)(49,"nz-option",42)(50,"nz-option",43)(51,"nz-option",44)(52,"nz-option",45)(53,"nz-option",46)(54,"nz-option",47)(55,"nz-option",48),r()(),o(56,"div",11)(57,"p",12),s(58,"Sort by:"),r(),o(59,"nz-select",49),k("ngModelChange",function(l){return p(d),y(e.selectedSort,l)||(e.selectedSort=l),m(l)}),f("ngModelChange",function(){return p(d),m(e.onSortChange(e.selectedSort))}),g(60,"nz-option",50)(61,"nz-option",51)(62,"nz-option",52)(63,"nz-option",53),r()()(),_(64,Ie,2,1,"div",54)(65,Ee,3,0,"ng-template",null,1,w),o(67,"button",55),f("click",function(){return p(d),m(e.loadMoreBooks())}),s(68," Load more books "),r()()}if(i&2){let d=C(14),h=C(66);a(11),c("nzAddOnAfter",d),a(),x("ngModel",e.searchTerm),a(8),x("ngModel",e.selectedFilter),a(14),x("ngModel",e.selectedFilter),a(13),x("ngModel",e.selectedFilter),a(12),x("ngModel",e.selectedSort),a(5),c("ngIf",e.books&&e.books.length>0)("ngIfElse",h)}},dependencies:[_e,S,X,M,Z,F,ee,te,ne,$,q,Q,N,de,ce,L,be,D,ge,he,ze]})}return n})();export{ht as HomeComponent};
