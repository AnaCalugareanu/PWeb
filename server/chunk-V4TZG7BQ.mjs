import './polyfills.server.mjs';
import{e as L,f as P,g as H,k as J}from"./chunk-M63QPG5Y.mjs";import{a as K,b as Q,c as U,d as X,e as Z,f as ee,g as te}from"./chunk-M4UG2CZT.mjs";import"./chunk-MFRIVIBL.mjs";import"./chunk-LKD4T2NZ.mjs";import{a as Y,b as q,g as G}from"./chunk-3AQAMF36.mjs";import{F as O,G as A,I as B,J as F,P as W,S as $,W as j}from"./chunk-CWDKVZD6.mjs";import"./chunk-FCJ3PSD6.mjs";import{$b as o,$c as D,Eb as y,Fb as T,Gb as I,Hb as i,Ib as n,Jb as h,Kb as V,Lb as k,Nb as w,Qb as p,Sb as z,Vb as S,_b as x,ac as c,db as a,dc as g,eb as f,ec as E,fc as R,hc as N,ma as C,tb as M,xa as m,xb as v,ya as d}from"./chunk-ADZ2ZCHX.mjs";import"./chunk-5XUXGTUW.mjs";function ie(s,u){if(s&1){let e=w();i(0,"tr")(1,"td"),o(2),n(),i(3,"td"),o(4),n(),i(5,"td"),o(6),n(),i(7,"td"),h(8,"nz-rate",7),n(),i(9,"td"),o(10),n(),i(11,"td")(12,"button",8),p("click",function(){let t=m(e).$implicit,l=z();return d(l.onEdit(t.id))}),o(13," Edit "),n(),i(14,"button",9),p("click",function(){let t=m(e).$implicit,l=z();return d(l.openRemoveIdModal(t.id,t.bookTitle,t.bookAuthor))}),o(15," Delete "),n()()()}if(s&2){let e=u.$implicit,r=u.$index;a(2),c(r+1),a(2),c(e.bookTitle),a(2),c(e.bookAuthor),a(2),v("ngModel",e.grade),a(2),c(e.tags.join(", "))}}function ne(s,u){s&1&&(V(0),o(1," Are you sure you want to remove this review?"),k())}var Ce=(()=>{class s{bookService;reviews=[];modalIsVisible=!1;removeModalIsVisible=!1;reviewId;bookTitle="";bookAuthor="";constructor(e){this.bookService=e}ngOnInit(){this.bookService.reviews$.subscribe(e=>{this.reviews=e})}onEdit(e){this.reviewId=e,this.modalIsVisible=!0}handleModalClosed(){this.modalIsVisible=!1,this.reviewId=null}handleCancel(){this.removeModalIsVisible=!1,this.reviewId=null}handleOk(){this.handleRemoveReview(this.reviewId),this.removeModalIsVisible=!1}openRemoveIdModal(e,r,t){this.reviewId=e,this.removeModalIsVisible=!0,this.bookTitle=r,this.bookAuthor=t}handleRemoveReview(e){this.bookService.removeReview(e)}static \u0275fac=function(r){return new(r||s)(f(G))};static \u0275cmp=C({type:s,selectors:[["app-my-reviews"]],standalone:!0,features:[N],decls:24,vars:7,consts:[["nzTable",""],[2,"margin","20px 100px 100px 100px"],["nzTableLayout","fixed",3,"nzData"],["nzWidth","60px"],[3,"modalClosed","reviewId","modalIsVisible"],["nzCancelText","No","nzOkText","Yes","nzOkDanger","",3,"nzVisibleChange","nzOnCancel","nzOnOk","nzVisible","nzTitle"],[4,"nzModalContent"],["nzDisabled","",3,"ngModel"],["nz-button","","nzType","primary",2,"margin-right","20px",3,"click"],["nz-button","","nzType","primary","nzDanger","",3,"click"]],template:function(r,t){if(r&1){let l=w();i(0,"div",1)(1,"h2"),o(2,"Here are all the reviews written by you and other readers."),n(),i(3,"nz-table",2,0)(5,"thead")(6,"tr"),h(7,"th",3),i(8,"th"),o(9,"Book title"),n(),i(10,"th"),o(11,"Author"),n(),i(12,"th"),o(13,"Review grade"),n(),i(14,"th"),o(15,"Tags"),n(),i(16,"th"),o(17,"Actions"),n()()(),i(18,"tbody"),T(19,ie,16,5,"tr",null,y),n()()(),i(21,"app-modal",4),p("modalClosed",function(){return m(l),d(t.handleModalClosed())}),n(),i(22,"nz-modal",5),R("nzVisibleChange",function(b){return m(l),E(t.removeModalIsVisible,b)||(t.removeModalIsVisible=b),d(b)}),p("nzOnCancel",function(){return m(l),d(t.handleCancel())})("nzOnOk",function(){return m(l),d(t.handleOk())}),M(23,ne,2,0,"ng-container",6),n()}if(r&2){let l=x(4);a(3),v("nzData",t.reviews),a(16),I(l.data),a(2),v("reviewId",t.reviewId)("modalIsVisible",t.modalIsVisible),a(),S("nzTitle","The review is for ",t.bookTitle," by ",t.bookAuthor,""),g("nzVisible",t.removeModalIsVisible)}},dependencies:[te,X,K,Q,ee,U,Z,D,q,Y,j,W,$,F,B,O,A,J,H,P,L]})}return s})();export{Ce as MyReviewsComponent};
